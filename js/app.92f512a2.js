(function(e){function t(t){for(var i,o,l=t[0],r=t[1],c=t[2],u=0,p=[];u<l.length;u++)o=l[u],Object.prototype.hasOwnProperty.call(s,o)&&s[o]&&p.push(s[o][0]),s[o]=0;for(i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i]);d&&d(t);while(p.length)p.shift()();return n.push.apply(n,c||[]),a()}function a(){for(var e,t=0;t<n.length;t++){for(var a=n[t],i=!0,l=1;l<a.length;l++){var r=a[l];0!==s[r]&&(i=!1)}i&&(n.splice(t--,1),e=o(o.s=a[0]))}return e}var i={},s={app:0},n=[];function o(t){if(i[t])return i[t].exports;var a=i[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=i,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)o.d(a,i,function(t){return e[t]}.bind(null,i));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/wikiSourceToDocuXml/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],r=l.push.bind(l);l.push=t,l=l.slice();for(var c=0;c<l.length;c++)t(l[c]);var d=r;n.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"00df":function(e,t,a){e.exports=a.p+"img/C_4C_small.7b7a817d.png"},"2cff":function(e,t,a){},"452c":function(e,t,a){},4678:function(e,t,a){var i={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function s(e){var t=n(e);return a(t)}function n(e){if(!a.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}s.keys=function(){return Object.keys(i)},s.resolve=n,e.exports=s,s.id="4678"},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var i,s,n=a("2b0e"),o=a("289d"),l=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"app"}},[e._m(0),i("b-modal",{attrs:{width:1e3,scroll:"keep"},model:{value:e.isAddExtendedLinks,callback:function(t){e.isAddExtendedLinks=t},expression:"isAddExtendedLinks"}},[i("header",{staticClass:"modal-card-head"},[i("p",{staticClass:"modal-card-title"},[e._v(" 選擇需要的書本（或單篇），並於下一頁選擇書本需要的篇章 ")]),i("button",{staticClass:"delete",attrs:{"aria-label":"close"},on:{click:function(t){return e.confirmAdd(0)}}})]),i("section",{staticClass:"modal-card-body"},e._l(e.refLinks,(function(t,a){return i("div",{key:a},[i("b-checkbox",{attrs:{size:"is-medium","native-value":t},model:{value:e.selectRefLinks,callback:function(t){e.selectRefLinks=t},expression:"selectRefLinks"}},[e._v(e._s(t)+" ")])],1)})),0),i("footer",{staticClass:"modal-card-foot"},[i("b-button",{attrs:{type:"is-primary"},on:{click:function(t){e.selectRefLinks=e.refLinks.map((function(e){return e}))}}},[e._v("全選 ")]),i("b-button",{attrs:{type:"is-primary"},on:{click:function(t){e.selectRefLinks=[]}}},[e._v("全不選 ")]),i("button",{staticClass:"button is-success",on:{click:function(t){return e.confirmAdd(1)}}},[e._v(" 保存結果 ")]),i("button",{staticClass:"button",on:{click:function(t){return e.confirmAdd(0)}}},[e._v("取消")])],1)]),i("b-modal",{attrs:{scroll:"keep"},model:{value:e.isCheckBook,callback:function(t){e.isCheckBook=t},expression:"isCheckBook"}},[i("header",{staticClass:"modal-card-head"},[i("p",{staticClass:"modal-card-title"},[e._v("目前已選書籍｜點擊可刪除書籍")])]),i("footer",{staticClass:"modal-card-foot"},[i("button",{staticClass:"button is-success",on:{click:function(t){e.isCheckBook=!1}}},[e._v(" 返回 ")])])]),i("b-modal",{attrs:{scroll:"keep"},model:{value:e.isSetGlobalDoc,callback:function(t){e.isSetGlobalDoc=t},expression:"isSetGlobalDoc"}},[i("header",{staticClass:"modal-card-head"},[i("p",{staticClass:"title"},[e._v("未確認分件方式的文檔處理方式")])]),i("section",{staticClass:"modal-card-body",staticStyle:{"max-height":"4em"}},[i("b-checkbox",{model:{value:e.isKeepHyperLink,callback:function(t){e.isKeepHyperLink=t},expression:"isKeepHyperLink"}},[e._v(" 保留超連結 ")]),i("b-checkbox",{model:{value:e.isCutFileByPara,callback:function(t){e.isCutFileByPara=t},expression:"isCutFileByPara"}},[e._v(" 以段分件（若未勾選則保留原來的全卷為一件） ")])],1),i("footer",{staticClass:"modal-card-foot"},[i("b-button",{attrs:{type:"is-primary"},on:{click:e.confirmGlobalSet}},[e._v("確認")])],1)]),i("b-modal",{attrs:{width:400},model:{value:e.isOpenUploadModal,callback:function(t){e.isOpenUploadModal=t},expression:"isOpenUploadModal"}},[i("header",{staticClass:"modal-card-head",staticStyle:{"justify-content":"space-between"}},[i("p",{staticClass:"modal-card-title"},[e._v("上傳到DocuSky")]),i("b-tooltip",{attrs:{label:"到DocuSky看看結果吧！",position:"is-left"}},[i("a",{attrs:{href:"https://docusky.org.tw/DocuSky/docuTools/userMain/",target:"_blank"}},[i("nav",{staticClass:"level"},[i("div",{staticClass:"level-item"},[i("img",{attrs:{src:a("00df"),alt:""}})]),i("div",{staticClass:"level-item",staticStyle:{"padding-top":"5px"}},[i("b-icon",{attrs:{icon:"upload",pack:"fas"}})],1)])])])],1),i("section",{staticClass:"modal-card-body login"},[i("b-field",{attrs:{label:"檔案名稱"}},[i("b-input",{model:{value:e.uploadFileName,callback:function(t){e.uploadFileName=t},expression:"uploadFileName"}})],1),i("b-field",{attrs:{label:"帳號"}},[i("b-input",{attrs:{type:"email",autocomplete:"username"},model:{value:e.account,callback:function(t){e.account=t},expression:"account"}})],1),i("b-field",{attrs:{label:"密碼"}},[i("b-input",{attrs:{type:"password"},nativeOn:{keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.login(t)}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1)],1),i("footer",{staticClass:"modal-card-foot",staticStyle:{"justify-content":"space-between"}},[i("div",[i("b-button",{attrs:{type:"is-success",outlined:""},on:{click:e.login}},[e._v(" 登入 ")]),i("b-button",{attrs:{type:"is-success",outlined:"",disabled:!e.isUploadable},on:{click:e.uploadXML}},[e._v(" 上傳 ")])],1),i("div",[i("b-button",{attrs:{type:"is-primary",outlined:""},on:{click:function(t){e.isOpenUploadModal=!1}}},[e._v(" 取消 ")])],1)])]),i("b-modal",{ref:"chooseMetaProps",attrs:{width:1e3,scroll:"keep"},model:{value:e.isEditMetaTable,callback:function(t){e.isEditMetaTable=t},expression:"isEditMetaTable"}},[i("header",{staticClass:"modal-card-head"},[i("label",{staticClass:"label"},[e._v("選擇需要的metadata欄位")])]),i("section",{staticClass:"modal-card-body"},[i("b-field",{attrs:{label:"1. DocuSky分件檔案名稱前綴（輸入X則會顯示為X_01.txt）"}},[i("b-input",{model:{value:e.filenameMeta,callback:function(t){e.filenameMeta=t},expression:"filenameMeta"}})],1),i("b-field",{attrs:{label:"2. 文獻集名稱取名"}},[i("b-input",{model:{value:e.corpusNameMeta,callback:function(t){e.corpusNameMeta=t},expression:"corpusNameMeta"}})],1),i("b-field",{attrs:{label:"3. 選擇需要的Metadata欄位"}},[i("multiselect",{ref:"multiselect",attrs:{options:e.selectMetaDataColumns,multiple:!0,"close-on-select":!1,"clear-on-select":!1,"preserve-search":!0,placeholder:"Pick some",label:"headerName","track-by":"headerName","preselect-first":!0,"max-height":300},on:{close:e.closeEventHandler},scopedSlots:e._u([{key:"selection",fn:function(t){var a=t.values,s=t.isOpen;return[a.length&&!s?i("span",{staticClass:"multiselect__single"},[e._v(" "+e._s(a.length)+" options selected ")]):e._e()]}}]),model:{value:e.selectedMetaDataColumns,callback:function(t){e.selectedMetaDataColumns=t},expression:"selectedMetaDataColumns"}})],1)],1),i("footer",{staticClass:"modal-card-foot"},[i("b-tooltip",{attrs:{label:"下一步編輯Metadata與Tag！",position:"is-right",animated:!1,size:"is-small"}},[i("b-button",{staticClass:"is-primary",attrs:{outlined:""},on:{click:e.splitWikiContents}},[e._v("確認輸出 ")])],1)],1)]),i("section",{staticClass:"section",staticStyle:{padding:"24px 12px 24px 12px"}},[i("b-steps",{ref:"control",staticClass:"step-custom",class:e.stepClass,attrs:{animated:e.isAnimated,rounded:e.isRounded,"has-navigation":e.hasNavigation,"icon-prev":e.prevIcon,"icon-next":e.nextIcon,"label-position":e.labelPosition,"mobile-mode":e.mobileMode,position:"is-right",vertical:""},scopedSlots:e._u([e.customNavigation?{key:"navigation",fn:function(t){var a=t.previous,s=t.next;return[i("nav",{staticClass:"step-navigation"},[i("b-button",{staticStyle:{bottom:"5px"},attrs:{type:"is-primary","icon-pack":"fas","icon-left":"arrow-up",disabled:a.disabled},on:{click:function(e){return e.preventDefault(),a.action(e)}}}),i("b-button",{attrs:{type:"is-primary","icon-pack":"fas","icon-right":"arrow-down",disabled:s.disabled||e.isOpenGate},on:{click:function(e){return e.preventDefault(),s.action(e)}}})],1)]}}:null],null,!0),model:{value:e.activeStep,callback:function(t){e.activeStep=t},expression:"activeStep"}},[i("b-step-item",{staticClass:"main-dish",attrs:{step:"1",label:"書本標題名搜索",clickable:e.isStepsClickable}},[i("section",{staticClass:"section headline"},[i("label",{staticClass:"label is-large",attrs:{title:"不需完整標題"}},[e._v("書本標題名搜索 ")])]),i("hr",{staticStyle:{margin:"5px","padding-left":"24px",width:"100%"}}),i("section",{staticClass:"section wow",staticStyle:{"padding-top":"20px"}},[i("div",{staticClass:"field has-addons",attrs:{expand:""}},[i("div",{staticClass:"control"},[i("div",{staticStyle:{display:"none"}},[i("input",{attrs:{type:"text",autocomplete:"username"}})]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.sourceWord,expression:"sourceWord"}],staticClass:"input",staticStyle:{"font-size":"80px"},attrs:{type:"search",placeholder:"鄭氏紀事",autocomplete:"off",expanded:""},domProps:{value:e.sourceWord},on:{keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getQueryResult(t)},input:function(t){t.target.composing||(e.sourceWord=t.target.value)}}})]),i("div",{staticClass:"control"},[i("b-button",{staticClass:"button is-link",staticStyle:{"font-size":"80px"},on:{click:e.getQueryResult}},[e._v(" 搜尋 ")])],1)])])]),i("b-step-item",{staticClass:"main-dish",attrs:{step:"2",label:"選擇文本",clickable:e.isStepsClickable,type:{"is-success":e.isProfileSuccess}}},[i("section",[i("b-sidebar",{attrs:{type:"is-light",fullheight:e.fullheightSideBar,fullwidth:e.fullwidthSideBar,overlay:e.overlaySideBar,right:e.rightSideBar,open:e.openSideBar},on:{"update:open":function(t){e.openSideBar=t}}},e._l(e.selectedBookMenuPool,(function(t,a){return i("div",{key:t+a,attrs:{label:"已選書單"}},e._l(t.menu,(function(t,s){return i("div",{key:t+1},[i("nav",{staticClass:"level"},[i("div",{staticClass:"level-left"},[i("div",{staticClass:"level-item"},[i("p",{staticStyle:{"font-size":"1.2em"}},[e._v(e._s(t))])])]),i("div",{staticClass:"level-right"},[i("div",{staticClass:"level-item"},[i("a",{on:{click:function(t){return t.stopPropagation(),e.deleteBook({bookOrder:a,chapOrder:s})}}},[i("b-icon",{attrs:{size:"is-medium","icon-pack":"fas",icon:"delete"}},[e._v("刪除 ")])],1)])])])])})),0)})),0)],1),i("section",{staticClass:"section headline"},[i("label",{staticClass:"label is-large"},[e._v("書本目錄檢視與選取")])]),i("hr",{staticStyle:{margin:"5px","padding-left":"24px",width:"100%"}}),e.isInputDataValid?i("section",{staticClass:"section wow"},[i("div",{staticClass:"columns is-multiline"},e._l(e.extendedLinks,(function(t,a){return i("div",{key:a,staticClass:"column is-half"},[i("GetTableContent",{attrs:{link:t,index:a,saved:e.selectedBookMenuPool.find((function(e){return e.searchName===t}))},on:{contentTableAdd:e.addSelectedMenuItem}})],1)})),0)]):e._e(),i("hr",{staticStyle:{margin:"5px","padding-left":"24px",width:"100%"}}),i("section",{staticClass:"section tool-button-line"},[i("nav",{staticClass:"level"},[i("div",{staticClass:"level-left"},[i("div",{staticClass:"level-item"},[i("b-button",{attrs:{type:"is-primary",outlined:""},on:{click:function(t){e.openSideBar=!e.openSideBar}}},[e._v(" 檢視已選文件")])],1),i("div",{staticClass:"level-item"},[i("b-button",{attrs:{type:"is-success",outlined:""},on:{click:e.releaseGate}},[e._v(" 進入下一步")])],1)])])])]),i("b-step-item",{staticClass:"main-dish",attrs:{step:"3",label:"選擇分件方式",clickable:e.isStepsClickable,type:{"is-success":e.isProfileSuccess}}},[i("section",{staticClass:"section headline"},[i("nav",{staticClass:"level"},[i("div",{staticClass:"level-left"},[i("div",{staticClass:"level-item"},[i("label",{staticClass:"label is-large"},[e._v(" 目前已下載卷數檢視 & 分件 ")])])])])]),i("hr",{staticStyle:{margin:"5px","padding-left":"24px",width:"100%"}}),i("section",{staticClass:"section wow"},e._l(e.selectedBookMenuPool,(function(t,a){return i("div",{key:a,staticClass:"columns is-multiline"},e._l(t.menu,(function(t,s){return i("div",{key:s,staticClass:"column is-one-third"},[i("BookChildContent",{ref:"contentTable",refInFor:!0,attrs:{"wiki-book":t,bookOrder:a,order:s},on:{"handle-wiki":e.handleWikiCutObj,"delete-book":e.deleteBook}})],1)})),0)})),0),i("hr",{staticStyle:{margin:"5px","padding-left":"24px",width:"100%"}}),i("section",{staticClass:"section tool-button-line"},[i("nav",{staticClass:"level"},[i("div",{staticClass:"level-left"},[i("div",{staticClass:"level-item"},[i("b-button",{attrs:{type:"is-primary",outlined:""},on:{click:function(t){e.isSetGlobalDoc=!0}}},[e._v(" 處理所有未點擊分件 ")])],1),i("div",{staticClass:"level-item"},[e.isFinishSplit?e._e():i("b-tooltip",{attrs:{label:"確認其他未自訂的文件設定完成了嗎？",multilined:"",position:"is-right"}},[i("b-button",{attrs:{type:"is-success",outlined:"",disabled:""},on:{click:e.releaseGate}},[e._v(" 完成自訂修改 ")])],1),e.isFinishSplit?i("b-button",{attrs:{type:"is-success",outlined:""},on:{click:e.releaseGate}},[e._v(" 完成自訂修改 ")]):e._e()],1)])])])]),i("b-step-item",{staticClass:"main-dish",attrs:{step:"4",label:"編輯Metadata",clickable:e.isStepsClickable,type:{"is-success":e.isProfileSuccess}}},[i("section",{staticClass:"section headline"},[i("nav",{staticClass:"level"},[i("div",{staticClass:"level-left"},[i("div",{staticClass:"level-item"},[i("label",{staticClass:"label is-large"},[e._v("編輯metadata區域｜")]),i("b-button",{attrs:{type:"is-primary",outlined:""},on:{click:e.openEditTable}},[e._v(" 選擇需要的Metadata欄位 ")])],1)]),i("div",{staticClass:"level-right"},[i("div",{staticClass:"level-item"},[i("b-button",{attrs:{type:"is-primary",outlined:""},on:{click:e.undoHot}},[i("b-icon",{attrs:{icon:"undo","icon-pack":"fas"}})],1)],1),i("div",{staticClass:"level-item"},[i("b-button",{attrs:{type:"is-primary",outlined:""},on:{click:e.redoHot}},[i("b-icon",{attrs:{icon:"redo","icon-pack":"fas"}})],1)],1)])])]),i("hr",{staticStyle:{margin:"5px","padding-left":"24px",width:"100%"}}),e.isShowTable?e._e():i("section",{staticClass:"dataHandsonTable wow"},[i("span",{staticClass:"subtitle"},[e._v("請先點擊上方選擇需要的metadata欄位")])]),e.isShowTable?i("section",{staticClass:"dataHandsonTable wow"},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.isEditMetadata,expression:"isEditMetadata"}]},[i("hot-table",{ref:"hotTableComponent",attrs:{data:e.splitCompleteWikiContents,rowHeaders:!0,licenseKey:e.licenseKey,autoRowSize:!0,colHeaders:e.colHeaders,manualRowResize:!0,manualColumnResize:[200,250],wordWrap:!1,autoWrapCol:!1,cells:e.setReadonlyColumn},on:{"update:data":function(t){e.splitCompleteWikiContents=t}}})],1)]):e._e(),i("hr",{staticStyle:{margin:"5px","padding-left":"24px",width:"100%"}}),i("section",{staticClass:"section tool-button-line"},[i("nav",{staticClass:"level"},[i("div",{staticClass:"level-left"},[i("div",{staticClass:"level-item"},[i("b-button",{staticClass:"is-primary",attrs:{outlined:""},on:{click:e.saveTempMeta}},[e._v(" 暫時存檔 ")])],1),i("div",{staticClass:"level-item"},[i("b-button",{staticClass:"is-primary",attrs:{outlined:""},on:{click:e.exportCsvFile}},[e._v(" 輸出CSV ")])],1),i("div",{staticClass:"level-item"},[i("b-button",{staticClass:"is-success",attrs:{outlined:""},on:{click:e.combineOrigin}},[e._v(" 完成編輯 ")])],1)])])])]),i("b-step-item",{staticClass:"main-dish",attrs:{step:"5",label:"編輯Tag",clickable:e.isStepsClickable,type:{"is-success":e.isProfileSuccess}}},[i("section",{staticClass:"section headline"},[i("nav",{staticClass:"level"},[i("div",{staticClass:"level-left"},[i("div",{staticClass:"level-item"},[i("label",{staticClass:"label is-large"},[e._v("點擊檢視文本 & 編輯Tag")])])])])]),i("hr",{staticStyle:{margin:"5px","padding-left":"24px",width:"100%"}}),i("section",{staticClass:"section wow"},[i("b-field",{attrs:{label:"1. 選擇DocuSky預設Tag","custom-class":"is-medium has-text-primary"}},e._l(e.wikiCheckTagOptions,(function(t){return i("div",{key:t.tagLabel+"20"},[i("b-checkbox",{attrs:{"native-value":t},model:{value:e.wikiTags,callback:function(t){e.wikiTags=t},expression:"wikiTags"}},[e._v(" "+e._s(t.tagLabel)+" ")])],1)})),0),i("b-field",{attrs:{label:"2. 增加個人設定Tag(於DocuSky顯示為Udef_'使用者自訂名稱')","custom-class":"is-medium has-text-primary"}},[i("multiselect",{attrs:{"tag-placeholder":"新增自訂tag",placeholder:"輸入自訂的tag名稱(請用英文)",label:"tagLabel","track-by":"tagName","close-on-select":!1,"clear-on-select":!1,options:e.wikiTagOptions,multiple:!0,taggable:!0},on:{remove:e.deleteAllTag,tag:e.addContentTag},model:{value:e.wikiTags,callback:function(t){e.wikiTags=t},expression:"wikiTags"}})],1),i("b-field",{attrs:{label:"3. 選擇文本進行Tag","custom-class":"is-medium has-text-primary"}},[i("div",{staticClass:"columns is-multiline"},e._l(e.splitCompleteWikiContents,(function(t,a){return i("TagEdit",{key:t.filename,ref:"editTag",refInFor:!0,attrs:{filename:t.title+"/"+t.filename,temp:e.tempSplitContents[a],index:a,tagOptions:e.wikiTags},on:{"handle-tag":e.handleWikiTag}})})),1)])],1),i("hr",{staticStyle:{margin:"5px","padding-left":"24px",width:"100%"}}),i("section",{staticClass:"section tool-button-line"},[i("b-button",{attrs:{type:"is-success",outlined:""},on:{click:e.releaseGate}},[e._v(" 完成Tag ")])],1)]),i("b-step-item",{staticClass:"main-dish",attrs:{step:"6",label:"排列文本次序",clickable:e.isStepsClickable,type:{"is-success":e.isProfileSuccess}}},[i("section",{staticClass:"section headline"},[i("nav",{staticClass:"level"},[i("div",{staticClass:"level-left"},[i("div",{staticClass:"level-item"},[i("label",{staticClass:"label is-large"},[e._v("排列文本次序")])])])])]),i("hr",{staticStyle:{margin:"5px","padding-left":"24px",width:"100%"}}),i("section",{staticClass:"section wow"},[i("draggable",e._b({on:{start:function(t){e.drag=!0},end:function(t){e.drag=!1}},model:{value:e.splitCompleteWikiContents,callback:function(t){e.splitCompleteWikiContents=t},expression:"splitCompleteWikiContents"}},"draggable",e.dragOptions,!1),[i("transition-group",{staticClass:"columns is-multiline",attrs:{type:"transition",name:e.drag?null:"flip-list"}},e._l(e.splitCompleteWikiContents,(function(e,t){return i("FileOrder",{key:e.filename,ref:"fileOrder",refInFor:!0,attrs:{filename:e.title+"/"+e.filename,content:e.doc_content,index:t}})})),1)],1)],1),i("hr",{staticStyle:{margin:"5px","padding-left":"24px",width:"100%"}}),i("section",{staticClass:"section tool-button-line"},[i("nav",{staticClass:"level"},[i("div",{staticClass:"level-left"},[i("div",{staticClass:"level-item"},[i("b-button",{staticClass:"is-primary",attrs:{outlined:""},on:{click:e.reOrderFile}},[e._v(" 重置排序 ")])],1),i("div",{staticClass:"level-item"},[i("b-button",{attrs:{type:"is-success",outlined:""},on:{click:e.generateXml}},[e._v("輸出XML ")])],1)])])])]),i("b-step-item",{staticClass:"main-dish",attrs:{step:"7",label:"輸出資料",clickable:e.isStepsClickable,type:{"is-success":e.isProfileSuccess}}},[i("section",{staticClass:"section headline"},[i("nav",{staticClass:"level"},[i("div",{staticClass:"level-left"},[i("div",{staticClass:"level-item"},[i("label",{staticClass:"label is-large"},[e._v("輸出資料")])])])])]),i("hr",{staticStyle:{margin:"5px","padding-left":"24px",width:"100%"}}),i("section",{staticClass:"section wow"},[i("div",{staticClass:"box"},[i("div",{staticClass:"column"},[i("b-button",{staticClass:"is-medium is-success",attrs:{outlined:"",expanded:""},on:{click:e.copyXML}},[e._v("複製DocuXML到剪貼簿 ")])],1),i("div",{staticClass:"column"},[i("b-button",{staticClass:"is-medium is-success",attrs:{outlined:"",expanded:""},on:{click:e.downloadXML}},[e._v(" 下載XML檔案進一步編輯 ")])],1),i("div",{staticClass:"column"},[i("b-button",{staticClass:"is-medium is-success",attrs:{outlined:"",expanded:""},on:{click:e.openLoginModal}},[e._v(" 直接上傳到DocuSky建庫 ")])],1)])]),i("section",{staticClass:"section tool-button-line"},[i("b-button",{staticStyle:{visibility:"hidden"}})],1)])],1)],1)],1)},r=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"hero is-primary is-small"},[a("div",{staticClass:"hero-head"},[a("nav",{staticClass:"navbar"},[a("div",{staticClass:"container"},[a("div",{staticClass:"navbar-menu"},[a("div",{staticClass:"navbar-start"},[a("div",{staticClass:"navbar-item"},[a("h4",{staticClass:"title is-4"},[e._v("Wiki2DocuXml")])])]),a("div",{staticClass:"navbar-end"},[a("a",{staticClass:"navbar-item",attrs:{target:"_blank",href:"../../../index2_20181204.html"}},[e._v(" 首頁 ")]),a("a",{staticClass:"navbar-item",attrs:{target:"_blank",href:"https://docusky.org.tw/DocuSky/docuTools/userMain/"}},[e._v(" 我的資料庫 ")]),a("a",{staticClass:"navbar-item",attrs:{target:"_blank",href:"https://drive.google.com/file/d/1-CZDJmh4-jYTBDbXUCOb291mEt3k8S1W/view?usp=sharing"}},[e._v(" 教學文件 ")]),a("a",{staticClass:"navbar-burger",attrs:{role:"button","aria-label":"menu","aria-expanded":"false"}},[a("span",{attrs:{"aria-hidden":"true"}}),a("span",{attrs:{"aria-hidden":"true"}}),a("span",{attrs:{"aria-hidden":"true"}})])])])])])])])}],c=a("1da1"),d=a("8785"),u=(a("96cf"),a("d81d"),a("99af"),a("ac1f"),a("5319"),a("b64b"),a("a434"),a("d3b7"),a("159b"),a("4d63"),a("2c3e"),a("25f0"),a("d80f"),a("c740"),a("4e82"),a("7db0"),a("e9c4"),a("a15b"),a("fb6a"),a("3ca3"),a("ddb0"),a("2b3d"),a("9861"),[{field:"author",headerName:"文件作者"},{field:"doc_source",headerName:"文件來源"},{field:"compilation_name",headerName:"文件出處"},{field:"compilation_vol",headerName:"文件出處的冊數"},{field:"topic",headerName:"文件主題"},{field:"geo",headerName:"文件地域名稱"},{field:"doc_topic_l1",headerName:"文件主題階層一"},{field:"doc_topic_l2",headerName:"文件主題階層二"},{field:"doc_topic_l3",headerName:"文件主題階層三"},{field:"geo_level1",headerName:"文件地域階層一"},{field:"geo_level2",headerName:"文件地域階層二"},{field:"geo_level3",headerName:"文件地域階層三"},{field:"geo_longitude",headerName:"文件所在經度"},{field:"geo_latitude",headerName:"文件所在緯度"},{field:"doc_category_l1",headerName:"文件分類階層一"},{field:"doc_category_l2",headerName:"文件分類階層二"},{field:"doc_category_l3",headerName:"文件分類階層三"},{field:"docclass",headerName:"文件類別"},{field:"docclass_aux",headerName:"文件子類別"},{field:"doctype",headerName:"文件型態"},{field:"doctype_aux",headerName:"文件子型態"},{field:"book_code",headerName:"文件書碼"},{field:"time_orig_str",headerName:"文件時間(字串)"},{field:"time_varchar",headerName:"文件時間(西曆)"},{field:"time_norm_year",headerName:"文件時間(中曆)"},{field:"era",headerName:"文件時間(年號)"},{field:"time_norm_kmark",headerName:"文件時間(帝號)"},{field:"year_for_grouping",headerName:"文件時間(西元年)"},{field:"time_dynasty",headerName:"文件時間(朝代)"},{field:"doc_seq_number",headerName:"文件順序"},{field:"timeseq_not_before",headerName:"文件起始時間"},{field:"timeseq_not_after",headerName:"文件結束時間"},{field:"date_not_before",headerName:"文件在某日期之後的時間"},{field:"date_not_after",headerName:"文件在某日期之前的時間"},{field:"date_number",headerName:"文件的日期"},{field:"doc_seq_number",headerName:"文件的時間順序"}]),p=["文件標題","文獻集名稱","文件作者","文件來源","文件主題階層一","文件主題階層二","文件主題階層三","文件地域階層一","文件地域階層二","文件地域階層三","文件所在經度","文件所在緯度","文件分類階層一","文件分類階層二","文件分類階層三","文件類別","文件子類別","文件型態","文件子型態","文件書碼","文件時間(字串)","文件時間(西曆)","文件時間(中曆)","文件時間(年號)","文件時間(帝號)","文件時間(西元年)","文件時間(朝代)","文件順序","文件起始時間","文件結束時間","文件內容","文件出處","文件出處的冊數","文件主題","文件地域名稱","文件在某日期之後的時間","文件在某日期之前的時間","文件的日期","文件的時間順序"],f=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"content"},[a("b-field",[a("b-button",{staticClass:"is-medium book-child",class:e.isViewed?"is-success":"is-primary",staticStyle:{height:"auto"},attrs:{outlined:"",expanded:""},on:{click:function(t){e.isOpenBook=!0}}},[e._v(" "+e._s(e.wikiBook)+" ")]),a("p",{staticClass:"control"},[a("b-button",{staticClass:"button is-medium is-danger",staticStyle:{height:"auto"},attrs:{outlined:""},on:{click:e.deleteBook}},[a("b-icon",{attrs:{icon:"delete"}})],1)],1)],1)],1),a("b-modal",{attrs:{width:1e3,scroll:"keep"},model:{value:e.isOpenBook,callback:function(t){e.isOpenBook=t},expression:"isOpenBook"}},[a("header",{staticClass:"modal-card-head"},[a("p",{staticClass:"modal-card-title"},[e._v("獲取的WikiSource文本內容")]),a("b-checkbox",{model:{value:e.isUrlAllow,callback:function(t){e.isUrlAllow=t},expression:"isUrlAllow"}},[e._v(" 保存超連結 ")])],1),a("section",{staticClass:"modal-card-body",attrs:{height:"30rem"}},[a("div",{staticClass:"tile is-ancestor"},[a("div",{staticClass:"tile is-7 is-parent"},[a("div",{staticClass:"tile is-child in-modal box"},[a("div",{staticClass:"card-content"},[a("div",{staticClass:"block"},[a("nav",{staticClass:"level"},[a("div",{staticClass:"level-left"},[a("div",{staticClass:"level-item"},[a("b-radio",{attrs:{name:"name","native-value":"1"},on:{change:e.getViewArray},model:{value:e.paragraphCutWay,callback:function(t){e.paragraphCutWay=e._n(t)},expression:"paragraphCutWay"}},[e._v(" 以此卷作為一件 ")])],1),a("div",{staticClass:"level-item"},[a("b-radio",{attrs:{name:"name","native-value":"2"},on:{change:e.getViewArray},model:{value:e.paragraphCutWay,callback:function(t){e.paragraphCutWay=e._n(t)},expression:"paragraphCutWay"}},[e._v(" 以段落切開作為一件 ")])],1)])]),a("nav",{staticClass:"level"},[a("div",{staticClass:"level-left"},[a("div",{staticClass:"level-item"},[a("b-radio",{attrs:{name:"name","native-value":"3"},on:{change:e.getViewArray},model:{value:e.paragraphCutWay,callback:function(t){e.paragraphCutWay=e._n(t)},expression:"paragraphCutWay"}},[e._v(" 自訂分段作為分件（以####作為語法輸入） ")])],1)])])]),a("textarea",{directives:[{name:"model",rawName:"v-model.lazy",value:e.pureText,expression:"pureText",modifiers:{lazy:!0}}],staticClass:"textarea",attrs:{placeholder:"10 lines of textarea",rows:"17"},domProps:{value:e.pureText},on:{change:[function(t){e.pureText=t.target.value},e.getViewArray]}})])])]),a("div",{staticClass:"tile is-vertical is-parent"},[a("div",{staticClass:"tile is-child box"},[a("p",{staticClass:"title"},[e._v("分件結果檢視")]),a("div",{staticClass:"content",staticStyle:{"max-height":"37em",overflow:"auto"}},e._l(e.viewContents,(function(t,i){return a("div",{key:i},[a("textarea",{staticClass:"textarea",attrs:{placeholder:"10 lines of textarea",rows:"5",readonly:""},domProps:{textContent:e._s(t)}}),a("div",{staticClass:"is-divider"})])})),0)])])])]),a("footer",{staticClass:"modal-card-foot"},[a("section",[a("b-field",[a("b-button",{attrs:{type:"is-success",outlined:""},on:{click:e.sendWikiCutObj}},[e._v("確認分件方式")])],1)],1)])])],1)},h=[],m=(a("4de4"),a("1276"),a("498a"),a("00b4"),a("2909")),b=a("b85c"),v=a("3835"),g=(a("466d"),a("4fad"),a("841c"),a("6062"),a("1157")),k=a("bc3a"),C=a.n(k),y=new Date;function w(e){return j.apply(this,arguments)}function j(){return j=Object(c["a"])(regeneratorRuntime.mark((function e(t){var a,i,s,n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=t.split("\n").filter((function(e){return e})),a=Object(b["a"])(t),e.prev=2,a.s();case 4:if((i=a.n()).done){e.next=23;break}return s=i.value,e.prev=6,e.next=9,C.a.get("https://zh.wikisource.org/w/api.php",{params:{action:"parse",page:s,origin:"*",format:"json",utf8:""}});case 9:return n=e.sent,e.next=12,S(n.data.parse);case 12:return o=e.sent,o=o.filter((function(e){return-1===e.indexOf(t)})),e.abrupt("return",o);case 17:e.prev=17,e.t0=e["catch"](6),console.log(e.t0),alert("請求出錯！");case 21:e.next=4;break;case 23:e.next=28;break;case 25:e.prev=25,e.t1=e["catch"](2),a.e(e.t1);case 28:return e.prev=28,a.f(),e.finish(28);case 31:case"end":return e.stop()}}),e,null,[[2,25,28,31],[6,17]])}))),j.apply(this,arguments)}function x(e){return _.apply(this,arguments)}function _(){return _=Object(c["a"])(regeneratorRuntime.mark((function e(t){var a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.a.get("https://zh.wikisource.org/w/api.php",{params:{action:"query",list:"search",srsearch:t,origin:"*",format:"json",utf8:"",srlimit:100}});case 3:return a=e.sent,e.next=6,a.data.query.search;case 6:return i=e.sent,i=i.map((function(e){return e.title.replace(/\/.*$/g,"").replace(/[0-9-]*$/g,"")})),e.abrupt("return",Object(m["a"])(new Set(i)));case 11:e.prev=11,e.t0=e["catch"](0),console.log(e.t0),alert("請求出錯！");case 15:case"end":return e.stop()}}),e,null,[[0,11]])}))),_.apply(this,arguments)}function T(e,t){var a=(new DOMParser).parseFromString(e,"text/html"),i=[],s=g(a).find('td[align="center"],.mw-headline,.mw-parser-output p,.mw-parser-output dd');void 0!==g(s).text()&&g(s).text().match(/重定向/g)&&alert('頁面:"'.concat(t,'"被重新導向至"').concat(g(a).find(".mw-parser-output a").text(),'"，請察看維基文庫頁面確認正確標題或搜尋'));for(var n=0;n<10;n++)g(s).find("*:not(a)").each((function(e,t){var a=g(t).html();g(t).replaceWith(a)}));g(s).find("a").each((function(e,t){var a=g(t).html(),i=void 0!==g(t).attr("href")&&g(t).attr("href").match(/^\/wiki\//g)?"https://zh.wikisource.org".concat(g(t).attr("href")):g(t).attr("href");g(t).replaceWith(W(a,"Udef_wiki",1,' Term="'.concat(a,'" Url="').concat(i,'"')))})),g(s).each((function(e,t){var a=g(t).text().replace(/\s/gm,"").replace(/^\r\n|^\n/gm,"").replace(/（并请在校对之后从条目的源代码中删除本模版：{{简转繁}}）/gm,"").replace(/&lt;(\W+)&gt;/g,"【$1】").replace(/↑返回頂部/g,""),s=g(t).html().replace(/&lt;(\W+)&gt;/g,"【$1】");/(屬於公有領域)/gm.test(a)||/(\.mw-parser-output\.kaiti)/gm.test(a)||""==a||i.push({paragraphs:a,hyperlinks:s.replace(/udef_wiki/g,"Udef_wiki").replace(/url/g,"Url").replace(/term/g,"Term")})}));var o=i.map((function(e){return e.paragraphs})).join("\n"),l=i.map((function(e){return e.hyperlinks})).join("\n");return{paragraphs:o,hyperlinks:l}}function S(e){return O.apply(this,arguments)}function O(){return O=Object(c["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=[],Object.prototype.hasOwnProperty.call(t,"links")&&t.links.forEach((function(e){N(e["*"])&&a.push(e["*"])})),e.abrupt("return",a);case 3:case"end":return e.stop()}}),e)}))),O.apply(this,arguments)}function M(e,t){for(var a=(e+"").length;a<t;a=e.length)e="0"+e;return e}function N(e){return!e.match(/(Category.*)|(Author.*)|(Wikisource.*)|(Template.*)|(模块.*)/g)}function W(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return 0==a?"<".concat(t).concat(i,">").concat(e,"</").concat(t,">\n"):"<".concat(t).concat(i,">").concat(e,"</").concat(t,">")}function L(e){var t="";for(var a in e)/\d+/.test(a)&&(t=a);return t}function D(e,t){return E.apply(this,arguments)}function E(){return E=Object(c["a"])(regeneratorRuntime.mark((function e(t,a){var i,s,n,o,l,r,c,d,u,p,f=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=f.length>2&&void 0!==f[2]?f[2]:{},s=f.length>3?f[3]:void 0,"numOfDir"in i||(i.numOfDir=0),e.prev=3,e.next=6,C.a.get("https://zh.wikisource.org/w/api.php?format=json&action=query&prop=revisions&rvprop=content&utf8",{params:{titles:t,origin:"*"}});case 6:if(n=e.sent,n=n.data,o=L(n.query.pages),l=n.query.pages[o].revisions[0]["*"],r=l.match(/.*\[\[(\/*.*)\|*.*\]\]/gm)||[],c=n.query.pages[o].title,d=t.match(/^[^/]*/),r=r.join("\n").replace(/^\n/gm,"").replace(/^\n/gm,"").match(/^[=*#!].*\[\[(.*)\|*.*\]\]/gm)||"",r){for(d&&(r=r.filter((function(e){return e}))),r=r.join("\n"),r=r.replace(/.*\[\[(.*\/*.*)\|*.*\]\]/gm,"$1").replace(/\|.*/gm,""),u=r.split("\n"),i.numOfDir+=u.length,p=0;p<u.length;p++)i.numOfDir--,/^\/.*/.test(u[p])&&(u[p]=c+u[p]),-1!=s.indexOf(u[p])||/.*全覽.*/.test(u[p])||s.push({index:p,value:u[p]});0===i.numOfDir&&(s=B(s))}else r||(s.push({index:0,value:c}),s=B(s));return e.abrupt("return",s);case 18:e.prev=18,e.t0=e["catch"](3),console.log(e.t0);case 21:case"end":return e.stop()}}),e,null,[[3,18]])}))),E.apply(this,arguments)}function B(e){var t=e,a=[];return t.forEach((function(e){var t=e.value.split("/");t.reduce((function(a,i,s){var n=a.find((function(e){var t=e.id;return i===t})),o=!0;return n||(o=s===t.length,n={id:i,label:i,index:e.index,value:"",isLeaf:o,children:[]},o&&delete n["children"],a.push(n)),n.children}),a)})),$(a),a}function $(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=0;i<e.length;i++)e[i].index=a,e[i].id="".concat(t,"/").concat(e[i].label).replace(/^\//,""),a++,0!==e[i].children.length?a=$(e[i].children,e[i].id,a):e[i].isLeaf=!0;return a}function A(e){return z.apply(this,arguments)}function z(){return z=Object(c["a"])(regeneratorRuntime.mark((function e(t){var a,i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.a.get("https://zh.wikisource.org/w/api.php",{params:{action:"parse",page:t,origin:"*",format:"json",utf8:""}});case 3:return a=e.sent,a=a.data.parse.text["*"],i=(new DOMParser).parseFromString(a,"text/html"),s=g(i).find("div#headerContainer.ws-noexport.noprint table tbody tr td").text(),s=s.replace(/姊妹計劃.*/g,"").replace(/版本信息.*/g,"").replace(/(維基百科條目|维基百科條目).*/g,""),e.abrupt("return",s);case 11:e.prev=11,e.t0=e["catch"](0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),z.apply(this,arguments)}function R(e){return P.apply(this,arguments)}function P(){return P=Object(c["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.length){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,C.a.get("https://zh.wikisource.org/w/api.php",{params:{action:"parse",page:t,origin:"*",format:"json",utf8:""}});case 5:return a=e.sent,e.abrupt("return",a.data.parse);case 9:e.prev=9,e.t0=e["catch"](2),console.log(e.t0),alert("請求出錯！");case 13:case"end":return e.stop()}}),e,null,[[2,9]])}))),P.apply(this,arguments)}function U(e){var t=[];return e.forEach((function(e){var a=!0===e.isUrlAllow?e.wikiText.hyperlinks:e.wikiText.paragraphs,i="";2===e.paragraphCutWay?i=/\n/:3===e.paragraphCutWay&&(i=/####/);var s=""===i?[a]:a.split(i).map((function(e){return e.trim()})).filter((function(e){var t=new RegExp("^$","sg");return!t.test(e)}));t.push({title:e.title,documents:s})})),t}function F(e,t,a,i){var s=[],n={},o=0;t.forEach((function(e){n[e.field]=""})),e.forEach((function(e){o+=e.documents.length}));var l=o.toString().length;return o=0,e.forEach((function(e){e.documents.forEach((function(t){o++;var r=Object.assign({},{title:"".concat(e.title),doc_content:t.replace(/<Udef_wiki/g,'<mark tag="Udef_wiki"').replace(/\/Udef_wiki/g,"/mark"),filename:"".concat(a,"_").concat(M(o,l),".txt"),corpus:"".concat(i)},n,{fileOrder:o});s.push(r)}))})),s}function I(e,t){var a=t.match(/.{0,2}<Udef_wiki[^>]*>[^<]*<\/Udef_wiki>.{0,2}/g);if(null===a)return e;var i=e;return a.forEach((function(e){var t=e.replace(/(.{0,2})<Udef_wiki[^>]*>([^<]*)<\/Udef_wiki>(.{0,2})/,"$1$2$3");i=i.replace(t,e)})),i}function H(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2?arguments[2]:void 0,n=a,o={},l=String.raw(i||(i=Object(d["a"])(["",""])),t),r=String.raw(s||(s=Object(d["a"])(['<mark tag="','">',"</mark>"])),e,t);function c(e){var t=0,a=e,i=new RegExp("(<mark[^>]*>[^<]*</mark>)");function s(e){return o["###".concat(t,"@###")]=e,"###".concat(t,"@###")}while(a.match(i))a=a.replace(i,s),t++;return a}function u(e){for(var t=e,a=0,i=Object.entries(o);a<i.length;a++){var s=Object(v["a"])(i[a],2),n=s[0],l=s[1];t=t.replace(new RegExp(n),l)}return o={},t}return n=c(n),n=n.replace(new RegExp(l,"g"),r),n=u(n),n}g["expr"][":"].regex=function(e,t,a){var i=a[3].split(","),s=/^(data|css):/,n={method:i[0].match(s)?i[0].split(":")[0]:"attr",property:i.shift().replace(s,"")},o="ig",l=new RegExp(i.join("").replace(/^\s+|\s+$/g,""),o);return l.test(g(e)[n.method](n.property))};var X={name:"BookChildContent",data:function(){return{isOpenBook:!1,paragraphCutWay:1,wikiObj:{},wikiText:{paragraphs:"",hyperlinks:""},isUrlAllow:!1,isViewed:!1,viewContents:[],isPreview:!1,sideFullheight:!0,sideFullwidth:!1,sideRight:!0,sideOpen:!1}},props:["wikiBook","order","bookOrder"],methods:{sendWikiCutObj:function(){this.$emit("handle-wiki",{title:this.wikiBook,order:this.order,paragraphCutWay:this.paragraphCutWay,isUrlAllow:this.isUrlAllow,wikiText:{paragraphs:this.pureText,hyperlinks:this.wikiText.hyperlinks}}),this.isOpenBook=!1,this.isViewed=!0},getViewArray:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.viewContents=[];var t=!0===this.isUrlAllow?this.wikiText.hyperlinks:this.pureText,a="";2===this.paragraphCutWay?a=/\n/:3===this.paragraphCutWay&&(a="####");var i=""===a?[t]:t.split(a).map((function(e){return e.trim()})).filter((function(e){var t=new RegExp("^$","sg");return!t.test(e)}));this.$nextTick((function(){this.viewContents=i})),1===e&&(this.isPreview=!this.isPreview)},deleteBook:function(){this.$emit("delete-book",{bookOrder:this.bookOrder,chapOrder:this.order})}},computed:{pureText:{get:function(){return this.wikiText.hyperlinks.replace(/\n{0,1}<Udef_wiki[^>]*>\n*([^<]*)\n*<\/Udef_wiki>\n{0,1}/gm,"$1")},set:function(e){this.wikiText.hyperlinks=I(e,this.wikiText.hyperlinks)}}},created:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,R(this.wikiBook);case 2:this.wikiObj=e.sent,this.wikiText=T(this.wikiObj.text["*"]),this.viewContents.push(this.wikiText.hyperlinks.replace(/\n{0,1}<Udef_wiki[^<]*>\n*([^<]*)\n*<\/Udef_wiki>\n{0,1}/gm,"$1"));case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),watch:{paragraphCutWay:function(){this.getViewArray()}}},G=X,V=(a("e3f5"),a("2877")),q=Object(V["a"])(G,f,h,!1,null,"4b6014dd",null),K=q.exports,J=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"tagParent",staticClass:"column is-one-third"},[a("div",{staticClass:"content"},[a("b-button",{staticClass:"is-primary",attrs:{outlined:"",expanded:""},on:{click:function(t){e.isOpenTagModal=!0}}},[e._v(e._s(e.filename)+" ")])],1),e.isTagOpen?a("div",{ref:"selbox",staticClass:"selectTagBox"},[a("div",[a("b-button",{attrs:{type:"is-small"},on:{click:e.setTag}},[e._v("確認")]),a("b-button",{attrs:{type:"is-small"},on:{click:function(t){e.isTagOpen=!1}}},[e._v("取消")])],1)]):e._e(),e.isCheckTagName?a("div",{ref:"checkTagBox",staticClass:"selectTagBox"},[a("span",[e._v(e._s(e.showTagName))])]):e._e(),a("b-modal",{attrs:{width:1e3,scroll:"keep"},model:{value:e.isOpenTagModal,callback:function(t){e.isOpenTagModal=t},expression:"isOpenTagModal"}},[a("header",{staticClass:"modal-card-head"},[a("p",{staticClass:"modal-card-title"},[e._v("編輯Tag")]),a("nav",{staticClass:"level"},[a("div",{staticClass:"level-item",staticStyle:{"padding-right":"0.5em"}},[a("h6",[e._v("選擇Tag名稱，劃記後確認。再次點擊Tag即可刪除")])]),a("div",{staticClass:"level-item"},[a("b-field",[a("b-select",{attrs:{placeholder:"選擇標籤名稱",size:"is-small"},model:{value:e.selectTag,callback:function(t){e.selectTag=t},expression:"selectTag"}},e._l(e.tagOptions,(function(t,i){return a("option",{key:i,attrs:{"native-value":t.tagName}},[e._v(" "+e._s(t.tagLabel)+" ")])})),0)],1)],1)])]),a("section",{staticClass:"modal-card-body"},[a("div",[e.isOpenTagModal?a("div",{ref:"text",staticStyle:{"white-space":"pre-wrap"},domProps:{innerHTML:e._s(e.wikiContent)},on:{mouseup:e.print}}):e._e()])]),a("footer",{staticClass:"modal-card-foot"},[a("b-button",{attrs:{type:"is-success",outlined:""},on:{click:e.saveTag}},[e._v("保存Tag")]),a("b-button",{attrs:{type:"is-primary",outlined:""},on:{click:function(t){e.isOpenTagModal=!1}}},[e._v("取消")])],1)])],1)},Y=[],Q={name:"TagEdit",watch:{isOpenTagModal:function(e){var t=this;this.$nextTick((function(){e&&(t.actionShowTag(),t.wikiContent=t.temp)})),e||(this.isTagOpen=!1)}},data:function(){return{wordSelection:void 0,wordRange:void 0,selectTag:"",isTagOpen:!1,isOpenTagModal:!1,extractCompleteTags:{},isMouseMove:!1,isCheckTagName:!1,showTagName:"",markBucket:{},wikiContent:""}},props:["filename","temp","index","tagOptions"],methods:{handleOut:function(e){this.isCheckTagName=!1,e.target.removeEventListener("mouseleave",this.handleOut)},handleIn:function(e){var t=this;"MARK"===e.target.tagName&&(this.isCheckTagName=!0,this.showTagName=e.target.attributes.tag.value,this.$nextTick((function(){t.$refs.checkTagBox.style.left="".concat(e.clientX+20,"px"),t.$refs.checkTagBox.style.top="".concat(e.clientY+20,"px")})),setTimeout((function(){t.isCheckTagName=!1}),1e3))},print:function(e){var t=this;if("MARK"!==e.target.tagName){this.wordSelection=window.getSelection();var a=this.wordSelection.getRangeAt(0).getBoundingClientRect(),i=a.width;i&&(this.isTagOpen=!0,this.$nextTick((function(){t.$refs.selbox.style.left="".concat(e.clientX+20,"px"),t.$refs.selbox.style.top="".concat(e.clientY+20,"px")})))}else this.deleteTag(e)},deleteTag:function(e){this.$refs.text.insertBefore(document.createTextNode(e.target.innerText),e.target),this.$refs.text.removeChild(e.target)},setTag:function(){var e=this.wordSelection.toString(),t=document.createElement("mark");t.setAttribute("tag",this.selectTag),t.appendChild(document.createTextNode(e)),this.wordSelection.deleteFromDocument(),this.wordSelection.getRangeAt(0).insertNode(t),this.isTagOpen=!1,this.searchAndTag(this.selectTag,e),this.extractCompleteTags[this.selectTag]=this.extractCompleteTags[this.selectTag]?this.extractCompleteTags[this.selectTag]+", "+e:e},searchAndTag:function(e,t){this.$refs.text.innerHTML=H(e,t,this.$refs.text.innerHTML)},actionShowTag:function(){this.$refs.text.addEventListener("mouseover",this.handleIn)},saveTag:function(){this.$emit("handle-tag",{newContent:this.$refs.text.innerHTML,index:this.index}),this.isOpenTagModal=!1}}},Z=Q,ee=(a("c2b3"),Object(V["a"])(Z,J,Y,!1,null,"a9fb3fbe",null)),te=ee.exports,ae=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("b-modal",{attrs:{width:1e3,scroll:"keep"},model:{value:e.isAddMenuToDownload,callback:function(t){e.isAddMenuToDownload=t},expression:"isAddMenuToDownload"}},[a("header",{staticClass:"modal-card-head"},[a("p",{staticClass:"modal-card-title"},[e._v("建立目錄樹狀結構")]),a("button",{staticClass:"delete",attrs:{"aria-label":"close"},on:{click:function(t){e.isAddMenuToDownload=!1}}})]),a("section",{staticClass:"modal-card-body"},[a("div",{staticClass:"tile is-ancestor"},[a("div",{staticClass:"tile is-7 is-parent"},[a("div",{staticClass:"tile is-child in-modal box"},[a("p",{staticClass:"title"},[e._v("目錄")]),a("treeselect",{attrs:{multiple:!0,options:e.treeShowMenu,"sort-value-by":e.sortValueBy,"value-consists-of":e.valueConsistsOf,limit:0,"always-open":!0,"default-expand-level":1,"max-height":400,noChildrenText:"無子目錄"},model:{value:e.tempSelectMenu,callback:function(t){e.tempSelectMenu=t},expression:"tempSelectMenu"}})],1)]),a("div",{staticClass:"tile is-vertical is-parent"},[a("div",{staticClass:"tile is-child box"},[a("div",{staticClass:"content"},[a("h5",[e._v("簡介")])]),a("div",{staticClass:"content",staticStyle:{"max-height":"30em",overflow:"auto"}},[a("p",{domProps:{textContent:e._s(e.wikiContentSnippet)}})])])])])]),a("footer",{staticClass:"modal-card-foot"},[a("button",{staticClass:"button is-success",on:{click:e.addSelectedMenuItem}},[e._v(" 保存結果 ")]),a("button",{staticClass:"button",on:{click:e.cancelBookSelect}},[e._v(" 取消 ")])])]),a("div",{staticClass:"box"},[a("div",{staticClass:"container"},[a("nav",{staticClass:"level"},[a("div",{staticClass:"level-item has-text-centered",staticStyle:{"flex-shrink":"1"}},[a("h4",{staticClass:"title is-4",class:0==e.selectChapLen?"":"purple"},[e._v(e._s(e.link))])]),a("div",{staticClass:"level-right"},[a("b-field",{attrs:{grouped:""}},[a("p",{staticClass:"control"},[a("b-button",{staticClass:"button is-primary is-small",on:{click:function(t){return e.addSelectedMenuItem(1)}}},[e._v(" 內文全選 ")])],1),a("p",{staticClass:"control"},[a("b-button",{staticClass:"button is-primary is-small",on:{click:e.getMenuOfContent}},[0===e.selectChapLen||void 0===e.selectChapLen?a("span",[e._v("目錄檢選")]):e._e(),0!=e.selectChapLen?a("div",[e._v(e._s(e.selectChapLen))]):e._e()])],1)])],1)])])])],1)},ie=[],se=(a("9911"),a("ca17")),ne=a.n(se),oe={name:"GetTableContent",components:{Treeselect:ne.a},data:function(){return{isAddMenuToDownload:!1,tempSelectMenu:[],treeShowMenu:[],sortValueBy:"INDEX",wikiContentSnippet:"",extendedLinks:[],valueConsistsOf:"ALL",saveTemp:[]}},props:["link","index","saved"],computed:{selectChapLen:function(){return this.saved?this.saved.menu.length:0}},methods:{getMenuOfContent:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A(this.link);case 3:return this.wikiContentSnippet=e.sent,e.next=6,D(this.link,0,{},[]);case 6:this.treeShowMenu=e.sent,void 0!==this.saved&&(this.tempSelectMenu=this.saved.menu.slice()),this.isAddMenuToDownload=!0,e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](0),console.log("獲取失敗。");case 14:case"end":return e.stop()}}),e,this,[[0,11]])})));function t(){return e.apply(this,arguments)}return t}(),addSelectedMenuItem:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){var t,a=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=a.length>0&&void 0!==a[0]?a[0]:0,1!=t){e.next=6;break}return e.next=4,this.getMenuOfContent();case 4:this.treeShowMenu[0].children.length>0?this.tempSelectMenu=this.treeShowMenu[0].children.map((function(e){return e.id})):this.tempSelectMenu=this.treeShowMenu.map((function(e){return e.id})),this.isAddMenuToDownload=!1;case 6:this.$emit("contentTableAdd",{index:this.index,searchName:this.link,menu:this.tempSelectMenu}),this.saveTemp=this.tempSelectMenu,this.isAddMenuToDownload=!1;case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),cancelBookSelect:function(){this.tempSelectMenu=this.saveTemp,this.isAddMenuToDownload=!1}}},le=oe,re=(a("ef22"),Object(V["a"])(le,ae,ie,!1,null,"ca8037c6",null)),ce=re.exports,de=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"column is-12"},[a("div",{staticClass:"content"},[a("b-button",{staticClass:"is-primary is-light",attrs:{expanded:"",static:""}},[e._v(e._s(e.filename)+" ")])],1)])},ue=[],pe={name:"FileOrder",data:function(){return{}},props:["filename","content","index"],methods:{}},fe=pe,he=(a("af61"),Object(V["a"])(fe,de,ue,!1,null,"4da33eca",null)),me=he.exports,be=a("b76a"),ve=a.n(be),ge=(a("542c"),a("3c78")),ke=(a("8033"),a("8e5f")),Ce=a.n(ke);a("e607");function ye(e,t,a,i){var s=t.slice(0);s.unshift({field:"title",headerName:"文件標題"},{field:"doc_content",headerName:"文本內容"},{field:"filename",headerName:"檔案名稱"},{field:"corpus",headerName:"文獻集名稱"});var n="";return n+=we(s,a,i),n+=je(e),n=_e("ThdlPrototypeExport",n,!1,[1,1]),n='<?xml version="1.0"?>\n'+n.replace(/\n\n/g,"\n"),n}function we(e,t,a){var i="",s="",n="";return e.forEach((function(e){var t=_e(e.field,e.headerName,!1,[0,1]);t=Se("show_spotlight","Y",t,!1),t=Se("display_order","999",t,!1),i+=t})),i=_e("metadata_field_settings",i,!1,[1,1]),t.forEach((function(e){var t='<spotlight category="'.concat(e.tagName,'" sub_category="-" display_order="1" title="').concat(e.tagLabel,'"/>\n');t+='<tag type="contentTagging" name="'.concat(e.tagName,'" default_category="').concat(e.tagName,'" default_sub_category="-"/>\n'),s+=t})),s=_e("feature_analysis",s,!1,[1,1]),n=i+s,n=_e("corpus",n,!1,[1,1]),n=Se("name",a,n,!1),n}function je(e){var t=e.map((function(e){for(var t="",a="",i="",s=0,n=Object.entries(e);s<n.length;s++){var o=Object(v["a"])(n[s],2),l=o[0],r=o[1];"doc_content"!==l&&"filename"!==l?t+=_e(l,r,!1,[0,1]):"doc_content"===l?a=r:"filename"===l&&(i=r)}a=xe(Oe(a));var c=t;return t+=_e("doc_content",a,!1,[1,1]),t+=_e("xml_metadata",c,!1,[1,1]),t=_e("document",t,!1,[1,1]),t=Se("filename",i,t,!1),t})).join("");return _e("documents",t,!1,[1,1])}function xe(e){var t=e,a=t.split("\n").filter((function(e){return e})).map((function(e){return _e("Paragraph",e,!1,[1,1])})).join("");return a}function _e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[0,0],s=a?Te(e):e,n=["","\n"];return"<".concat(s,">").concat(n[i[0]]).concat(t).concat(n[i[0]],"</").concat(s,">").concat(n[i[1]])}function Te(e){return e.charAt(0).toUpperCase()+e.slice(1)}function Se(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=a.match(/^<[^/\s>]*/);if(s){var n=i?Te(e):e,o=s[0].length;return"".concat(s[0]," ").concat(n,'="').concat(t,'"').concat(a.slice(o))}}function Oe(e){var t=e;function a(e,t,a,i){return"<".concat(Te(a)).concat(i,"</").concat(Te(a),">")}function i(e,t){return"".concat(Te(t),'="')}return t=t.replace(/(<mark tag=)"([^"]*)"([^>]*>[^<]*)(<\/mark>)/g,a).replace(/(\w+)="/g,i).replace(/(<((?!Term)[^>])*)>([^<]*)(<\/[^>]*>)/g,'$1 Term="$3">$3$4'),t}var Me,Ne=a("2c4e"),We=a("5c8a"),Le={name:"App",components:{BookChildContent:K,HotTable:ge["a"],Multiselect:Ce.a,TagEdit:te,GetTableContent:ce,draggable:ve.a,FileOrder:me},computed:{dragOptions:function(){return{animation:200,group:"description",disabled:!1,ghostClass:"ghost"}},countSplitContents:function(){return this.splitCompleteWikiContents.length},isOpenGate:function(){return this.isProcessDisable[this.activeStep]}},watch:{activeStep:{immediate:!0,handler:function(e,t){3===t&&this.$nextTick((function(){var e=this;this.splitCompleteWikiContents=this.splitCompleteWikiContents.map((function(t,a){return t.doc_content=e.tempSplitContents[a],t}))}))}}},data:function(){return{activeStep:0,showSocial:!1,isAnimated:!0,isRounded:!0,isStepsClickable:!0,hasNavigation:!0,customNavigation:!0,isProfileSuccess:!1,prevIcon:"arrow-up",nextIcon:"arrow-down",labelPosition:"left",mobileMode:"minimalist",stepClass:"step-class",isProcessDisable:[!0,!0,!0,!0,!0,!0,!0],isInputDataValid:!0,isMetadataComplete:!0,isKeepFormat:"Yes",isAddHyperlink:!0,urlFieldHint:"",isInputEmpty:!1,wikiUrls:"",wikiContents:"",filename:"",isSeperateByParagraph:"default",isAddExtendedLinks:!1,isAddMenuToDownload:!1,extendedLinks:[],confirmLinks:[],sourceWord:"",corpusName:"",corpusDefault:"文獻集名稱：預設「我的資料集」",tableOfContents:[],tempMenuList:[],treeShowMenu:[],sortValueBy:"INDEX",valueConsistsOf:"ALL",tempSelectMenu:[],selectedBookMenuPool:[],menuIndexCount:0,refLinks:[],selectRefLinks:[],wikiContentSnippet:"",isCheckBook:!1,kidsWord:"",testModal:!0,isImageModalActive:!1,wikiContentWaitCut:[],splitCompleteWikiContents:[],testSelCut:1,selectMetaDataColumns:u,selectedMetaDataColumns:[],licenseKey:"non-commercial-and-evaluation",isEditMetadata:!1,getSplitSheet:[],colHeaders:p,columns:[],isEditMetaTable:!1,isSetGlobalDoc:!1,filenameMeta:"file",corpusNameMeta:"我的文獻集",uploadFileName:"我的文獻集",wikiTags:[],wikiTagOptions:[],wikiCheckTagOptions:[{tagLabel:"PersonName",tagName:"PersonName"},{tagLabel:"LocName",tagName:"LocName"},{tagLabel:"Date",tagName:"Date"},{tagLabel:"Office",tagName:"Office"}],showXmlString:"",isKeepHyperLink:!1,isCutFileByPara:!1,isOpenUploadModal:!1,account:"",password:"",isUploadable:!1,drag:!1,isEditFileOrder:!1,tempSplitContents:[],openSideBar:!1,overlaySideBar:!0,fullheightSideBar:!0,fullwidthSideBar:!1,rightSideBar:!1,isCheckFinalCode:!1,isShowTable:!1,isFinishSplit:!1}},created:function(){var e=this;window.localStorage.getItem("metaTable")&&this.$buefy.dialog.confirm({message:"有已存檔的MetaData編輯資料，是否載入？",onConfirm:function(){e.isAddHyperlink=Boolean(window.localStorage.getItem("hyperlink")),e.isAddHyperlink&&(e.wikiTagOptions.push({tagLabel:"Wiki_url",tagName:"Udef_wiki"}),e.wikiTags.push({tagLabel:"Wiki_url",tagName:"Udef_wiki"})),e.isProcessDisable[0]=!1,e.isProcessDisable[1]=!1,e.isProcessDisable[2]=!1,e.activeStep=3,e.isEditMetadata=!0,e.selectedMetaDataColumns=JSON.parse(window.localStorage.getItem("columnNameList")),e.colHeaders=["文件標題","文本內容","檔案名稱","文獻集名稱"],e.colHeaders=e.colHeaders.concat(e.selectedMetaDataColumns.map((function(e){return e.headerName}))),e.colHeaders=e.colHeaders.concat("文件次序編碼"),e.$nextTick((function(){e.splitCompleteWikiContents=JSON.parse(window.localStorage.getItem("metaTable")),e.tempSplitContents=e.splitCompleteWikiContents.map((function(e){return e.doc_content})),e.splitCompleteWikiContents=e.splitCompleteWikiContents.map((function(e){return e.doc_content=e.doc_content.replace(/([\s\S]{0,200})[\s\S]*/m,"$1"),e})),e.isShowTable=!0,e.$nextTick((function(){for(var e in this.$refs.hotTableComponent.hotInstance.loadData(this.splitCompleteWikiContents),this.splitCompleteWikiContents)this.$refs.hotTableComponent.hotInstance.setCellMeta(e,Object.keys(this.splitCompleteWikiContents[0]).length-1,"readOnly",!0)}))}))},onCancel:function(){e.$buefy.dialog.confirm({message:"要刪除Metadata已存檔案嗎？",onConfirm:function(){window.localStorage.clear()}})}})},methods:{undoHot:function(){this.$refs.hotTableComponent.hotInstance.undo()},redoHot:function(){this.$refs.hotTableComponent.hotInstance.redo()},deleteBook:function(e){var t=e.bookOrder,a=e.chapOrder;this.selectedBookMenuPool.length&&this.selectedBookMenuPool[t].menu.splice(a,1)},deleteAllTag:function(e){this.splitCompleteWikiContents.forEach((function(t){t.doc_content=t.doc_content.replace(new RegExp(String.raw(Me||(Me=Object(d["a"])(['<mark tag="','">([^<]*)</mark>'])),e.tagName),"g"),"$1")}))},addContentTag:function(e){var t={tagLabel:e,tagName:"Udef_".concat(e)};this.wikiTagOptions.push(t),this.wikiTags.push(t)},cleanUrlField:function(){this.wikiUrls="",this.urlFieldHint="",this.isInputEmpty=!1,this.wikiDocuments=[]},getQueryResult:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(""!=this.sourceWord){e.next=2;break}return e.abrupt("return");case 2:return this.refLinks=[],this.selectRefLinks=[],this.confirmLinks=[],this.tableOfContents=[],this.selectedBookMenuPool=[],e.next=9,x(this.sourceWord);case 9:this.refLinks=e.sent,this.confirmAdd(1);case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),addSelectedMenuItem:function(e){var t=this.selectedBookMenuPool.findIndex((function(t){return t.index===e.index}));-1!==t?this.selectedBookMenuPool[t]=e:this.selectedBookMenuPool.push(e)},getRefLink:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.refLinks=[],e.next=3,w(this.extendedLinks[t]);case 3:a=e.sent,this.refLinks.concat(a);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),openSelectBookList:function(){this.selectedBookMenuPool.sort((function(e,t){return e.index-t.index})),this.isCheckBook=!0},confirmGlobalSet:function(){var e=this;this.$refs.contentTable.forEach((function(t){t.isViewed||(e.isCutFileByPara&&(t.paragraphCutWay=2),e.isKeepHyperLink&&(t.isUrlAllow=!0),t.sendWikiCutObj())})),this.isSetGlobalDoc=!1,this.isFinishSplit=!0},openEditTable:function(){this.isEditMetaTable=!0,this.$nextTick((function(){this.$refs.multiselect.activate()}))},handleWikiCutObj:function(e){var t=this.wikiContentWaitCut.findIndex((function(t){return t.title===e.title}));-1!==t&&(this.wikiContentWaitCut[t]=e),this.wikiContentWaitCut.push(e),e.isUrlAllow&&!this.wikiTagOptions.find((function(e){return"Wiki_url"===e.tagLabel}))&&(this.wikiTagOptions.push({tagLabel:"Wiki_url",tagName:"Udef_wiki"}),this.wikiTags.push({tagLabel:"Wiki_url",tagName:"Udef_wiki"}))},handleWikiTag:function(e){this.splitCompleteWikiContents[e.index].doc_content=e.newContent,this.tempSplitContents[e.index]=e.newContent},splitWikiContents:function(){var e=this;this.wikiContentWaitCut.sort((function(e,t){return e.order>t.order?1:-1})),this.splitCompleteWikiContents=U(this.wikiContentWaitCut),this.splitCompleteWikiContents=F(this.splitCompleteWikiContents,this.selectedMetaDataColumns,this.filenameMeta,this.corpusNameMeta),this.isEditMetadata=!0,this.$nextTick((function(){this.$refs.hotTableComponent.hotInstance.loadData(this.splitCompleteWikiContents)})),this.colHeaders=["文件標題","文本內容","檔案名稱","文獻集名稱"],this.colHeaders=this.colHeaders.concat(this.selectedMetaDataColumns.map((function(e){return e.headerName}))),this.colHeaders=this.colHeaders.concat("文件次序編碼"),this.$nextTick((function(){for(var t in e.splitCompleteWikiContents)e.$refs.hotTableComponent.hotInstance.setCellMeta(t,Object.keys(e.splitCompleteWikiContents[0]).length-1,"readOnly",!0)})),this.tempSplitContents=this.splitCompleteWikiContents.map((function(e){return e.doc_content})),this.splitCompleteWikiContents=this.splitCompleteWikiContents.map((function(e){return e.doc_content=e.doc_content.replace(/([\s\S]{0,200})[\s\S]*/m,"$1"),e})),this.isEditMetaTable=!1,this.isShowTable=!0},saveTempMeta:function(){var e=this,t=Object(We["a"])(this.splitCompleteWikiContents);t.forEach((function(t,a){t.doc_content=e.tempSplitContents[a]}));var a=window.localStorage;a.clear(),a.setItem("metaTable",JSON.stringify(t)),a.setItem("hyperlink",this.isKeepHyperLink),a.setItem("columnNameList",JSON.stringify(this.selectedMetaDataColumns)),this.$buefy.snackbar.open("已完成儲存")},exportCsvFile:function(){var e=this,t=Object(We["a"])(this.splitCompleteWikiContents);t.forEach((function(t,a){t.doc_content=e.tempSplitContents[a]}));var a="文件標題,文本內容,檔案名稱,文獻集名稱,";a+=this.selectedMetaDataColumns.map((function(e){return e.headerName})).join(","),a+="\n",a+=t.map((function(e){var t=[];for(var a in e)t.push('"'.concat(e[a],'"'));return t.slice(0,-1).join(",")})).join("\n");var i=new Date,s=document.createElement("a"),n="".concat(i.toLocaleString(),"_備份.csv");s.setAttribute("href","data:text/xml;charset=utf-8,"+encodeURIComponent(a)),s.setAttribute("download",n),s.style.display="none",document.body.appendChild(s),s.click(),document.body.removeChild(s)},combineOrigin:function(){this.releaseGate()},reOrderFile:function(){this.splitCompleteWikiContents=this.splitCompleteWikiContents.sort((function(e,t){return e.fileOrder-t.fileOrder}))},confirmOrder:function(){this.tempSplitContents=this.splitCompleteWikiContents.map((function(e){return e.doc_content}));for(var e=0;e<this.splitCompleteWikiContents.length;e++)this.splitCompleteWikiContents[e].fileOrder=e+1,this.splitCompleteWikiContents[e].filename="".concat(this.filenameMeta,"_").concat(M(e+1,this.splitCompleteWikiContents.length.toString().length),".txt");this.reOrderFile(),this.$nextTick((function(){for(var e in this.$refs.hotTableComponent.hotInstance.loadData(this.splitCompleteWikiContents),this.splitCompleteWikiContents)this.$refs.hotTableComponent.hotInstance.setCellMeta(e,Object.keys(this.splitCompleteWikiContents[0]).length-1,"readOnly",!0)})),this.saveTempMeta()},checkForm:function(){return this.wikiUrls?1:(this.urlFieldHint="is-danger",this.isInputEmpty=!0,0)},confirmAdd:function(e){e&&(this.extendedLinks=this.refLinks,this.releaseGate()),this.selectRefLinks=[],this.isAddExtendedLinks=!1},checkContentValue:function(e){e.isFixContent=!e.isFixContent,e.isContentOpen=!e.isContentOpen},deleteContentValue:function(e){this.wikiDocuments.splice(e,1)},download:function(){var e=document.createElement("a"),t=""==this.filename?"".concat(y.getFullYear(),"_").concat(y.getMonth(),"_").concat(y.getDate(),".xml"):this.filename;e.setAttribute("href","data:text/xml;charset=utf-8,"+encodeURIComponent(this.wikiContents)),e.setAttribute("download",t),e.style.display="none",document.body.appendChild(e),e.click(),document.body.removeChild(e)},copyTestingCode:function(){var e=g("#wikiContents").select((function(){try{alert("Testing code was copied ")}catch(e){alert("Oops, unable to copy")}}));e.setAttribute("type","hidden"),window.getSelection().removeAllRanges()},onCopy:function(){alert("Copying Success!!")},selectAllExtendLinks:function(){var e=this;this.extendedLinks.forEach((function(t){e.confirmLinks.push(t)}))},setReadonlyColumn:function(e,t){var a={};return 1!=t&&2!=t&&3!=t||(a.readOnly=!0),1==t&&(a.className="cell-edit"),a},closeEventHandler:function(){this.$refs.multiselect.isOpen=!0},generateXml:function(){var e=this,t=this.splitCompleteWikiContents,a=t.length.toString().length+1,i=this.splitCompleteWikiContents.map((function(t,i){return t.filename="".concat(e.filenameMeta,"_").concat(M(i+1,a),".txt"),t})),s=Object(We["a"])(i);s.forEach((function(e){delete e["fileOrder"]})),this.showXmlString=ye(s,this.selectedMetaDataColumns,this.wikiTags,this.corpusNameMeta),this.releaseGate()},copyXML:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,navigator.clipboard.writeText(this.showXmlString);case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),downloadXML:function(){var e=document.createElement("a");e.download="".concat(this.corpusNameMeta),e.style.display="none";var t=new Blob([this.showXmlString],{type:"text/xml"});e.href=URL.createObjectURL(t),document.body.appendChild(e),e.click(),document.body.removeChild(e)},openLoginModal:function(){this.isOpenUploadModal=!0},login:function(){var e=this;function t(){Ne["a"].open("Login Failed...")}this.account&&this.password?docuskyManageDbListSimpleUI.login(this.account,this.password,(function(){Ne["a"].open("Login Success!"),e.isUploadable=!0}),(function(){t()})):t()},uploadXML:function(){var e=new Date,t="我的文獻集"===this.uploadFileName?String("我的文獻集_".concat(e.toLocaleString())).replace(/[/\s]/g,"_"):this.uploadFileName;if(!this.showXmlString)return Ne["a"].open("Require Content...");var a={dummy:{name:"dbTitleForImport",value:t},file:{value:this.showXmlString.replace(/\n/g,""),filename:t+".xml",name:"importedFiles[]"}};docuskyManageDbListSimpleUI.uploadMultipart(a,(function(){Ne["a"].open("Upload Success!")}),(function(){Ne["a"].open("Upload Failed...")}))},releaseGate:function(){this.isProcessDisable[this.activeStep]=!1,this.activeStep++}}},De=Le,Ee=(a("585c"),a("b0a0"),Object(V["a"])(De,l,r,!1,null,"55dc7cb1",null)),Be=Ee.exports,$e=(a("5abe"),a("a6f4"));n["default"].use($e["a"]),n["default"].use(o["a"]),n["default"].config.productionTip=!1,new n["default"]({render:function(e){return e(Be)}}).$mount("#app")},"585c":function(e,t,a){"use strict";a("6b34")},"6b34":function(e,t,a){},abc7:function(e,t,a){},af61:function(e,t,a){"use strict";a("abc7")},b0a0:function(e,t,a){"use strict";a("452c")},b0eb:function(e,t,a){},c2b3:function(e,t,a){"use strict";a("b0eb")},e3f5:function(e,t,a){"use strict";a("2cff")},e49c:function(e,t,a){},e945:function(e,t,a){var i={"./af":"c00a","./af.js":"c00a","./ar":"c97e","./ar-dz":"0162","./ar-dz.js":"0162","./ar-kw":"fae4","./ar-kw.js":"fae4","./ar-ly":"aa71","./ar-ly.js":"aa71","./ar-ma":"5d88","./ar-ma.js":"5d88","./ar-sa":"a10a","./ar-sa.js":"a10a","./ar-tn":"152f","./ar-tn.js":"152f","./ar.js":"c97e","./az":"54cd","./az.js":"54cd","./be":"3dd4","./be.js":"3dd4","./bg":"a802","./bg.js":"a802","./bm":"7cd9","./bm.js":"7cd9","./bn":"7151","./bn.js":"7151","./bo":"323a","./bo.js":"323a","./br":"3138","./br.js":"3138","./bs":"acbc","./bs.js":"acbc","./ca":"0876","./ca.js":"0876","./cs":"0aef","./cs.js":"0aef","./cv":"8be7","./cv.js":"8be7","./cy":"6764","./cy.js":"6764","./da":"7612","./da.js":"7612","./de":"4da8","./de-at":"976e","./de-at.js":"976e","./de-ch":"686e","./de-ch.js":"686e","./de.js":"4da8","./dv":"39df","./dv.js":"39df","./el":"4c94","./el.js":"4c94","./en-SG":"f58c","./en-SG.js":"f58c","./en-au":"4415","./en-au.js":"4415","./en-ca":"499b","./en-ca.js":"499b","./en-gb":"4e86","./en-gb.js":"4e86","./en-ie":"7c7e","./en-ie.js":"7c7e","./en-il":"f923","./en-il.js":"f923","./en-nz":"f766","./en-nz.js":"f766","./eo":"8135","./eo.js":"8135","./es":"6ebc","./es-do":"e481","./es-do.js":"e481","./es-us":"d75c","./es-us.js":"d75c","./es.js":"6ebc","./et":"e662","./et.js":"e662","./eu":"65b7","./eu.js":"65b7","./fa":"0028","./fa.js":"0028","./fi":"5fd1","./fi.js":"5fd1","./fo":"72f4","./fo.js":"72f4","./fr":"6e81","./fr-ca":"c471","./fr-ca.js":"c471","./fr-ch":"f797","./fr-ch.js":"f797","./fr.js":"6e81","./fy":"d8b9","./fy.js":"d8b9","./ga":"064e","./ga.js":"064e","./gd":"94ef","./gd.js":"94ef","./gl":"c74b","./gl.js":"c74b","./gom-latn":"5601","./gom-latn.js":"5601","./gu":"2a3d","./gu.js":"2a3d","./he":"9669","./he.js":"9669","./hi":"e85f","./hi.js":"e85f","./hr":"bf5e","./hr.js":"bf5e","./hu":"9901","./hu.js":"9901","./hy-am":"012e","./hy-am.js":"012e","./id":"ba8c","./id.js":"ba8c","./is":"c6c1","./is.js":"c6c1","./it":"6101","./it-ch":"b2d4","./it-ch.js":"b2d4","./it.js":"6101","./ja":"f2b8","./ja.js":"f2b8","./jv":"d9e8","./jv.js":"d9e8","./ka":"4d4c","./ka.js":"4d4c","./kk":"b770","./kk.js":"b770","./km":"b388","./km.js":"b388","./kn":"a056","./kn.js":"a056","./ko":"44157","./ko.js":"44157","./ku":"27e5","./ku.js":"27e5","./ky":"d2f5","./ky.js":"d2f5","./lb":"01fe","./lb.js":"01fe","./lo":"d759","./lo.js":"d759","./lt":"d47b","./lt.js":"d47b","./lv":"3793","./lv.js":"3793","./me":"b26f","./me.js":"b26f","./mi":"d0b2","./mi.js":"d0b2","./mk":"8357","./mk.js":"8357","./ml":"b4f4","./ml.js":"b4f4","./mn":"c7bf","./mn.js":"c7bf","./mr":"96b4","./mr.js":"96b4","./ms":"9bf3","./ms-my":"64f3","./ms-my.js":"64f3","./ms.js":"9bf3","./mt":"44b6","./mt.js":"44b6","./my":"35e8","./my.js":"35e8","./nb":"cd6b","./nb.js":"cd6b","./ne":"ee29","./ne.js":"ee29","./nl":"fd25","./nl-be":"11d4","./nl-be.js":"11d4","./nl.js":"fd25","./nn":"a90d","./nn.js":"a90d","./pa-in":"048e","./pa-in.js":"048e","./pl":"b099","./pl.js":"b099","./pt":"8cc1","./pt-br":"cd1a","./pt-br.js":"cd1a","./pt.js":"8cc1","./ro":"4f7b","./ro.js":"4f7b","./ru":"4a7a","./ru.js":"4a7a","./sd":"441d","./sd.js":"441d","./se":"1e99","./se.js":"1e99","./si":"6c0c","./si.js":"6c0c","./sk":"5234","./sk.js":"5234","./sl":"f896","./sl.js":"f896","./sq":"34ed","./sq.js":"34ed","./sr":"849e","./sr-cyrl":"85d6","./sr-cyrl.js":"85d6","./sr.js":"849e","./ss":"4061","./ss.js":"4061","./sv":"d88f","./sv.js":"d88f","./sw":"e7a7","./sw.js":"e7a7","./ta":"d3b3","./ta.js":"d3b3","./te":"eed5","./te.js":"eed5","./tet":"b816","./tet.js":"b816","./tg":"8a7b","./tg.js":"8a7b","./th":"19cc","./th.js":"19cc","./tl-ph":"672a","./tl-ph.js":"672a","./tlh":"3f0d","./tlh.js":"3f0d","./tr":"b6ff","./tr.js":"b6ff","./tzl":"3455","./tzl.js":"3455","./tzm":"4707","./tzm-latn":"022c","./tzm-latn.js":"022c","./tzm.js":"4707","./ug-cn":"39ef","./ug-cn.js":"39ef","./uk":"6901","./uk.js":"6901","./ur":"bc69","./ur.js":"bc69","./uz":"1d5c","./uz-latn":"1f6a","./uz-latn.js":"1f6a","./uz.js":"1d5c","./vi":"9128","./vi.js":"9128","./x-pseudo":"a886","./x-pseudo.js":"a886","./yo":"1db8","./yo.js":"1db8","./zh-cn":"ed0f","./zh-cn.js":"ed0f","./zh-hk":"b487","./zh-hk.js":"b487","./zh-tw":"1940","./zh-tw.js":"1940"};function s(e){var t=n(e);return a(t)}function n(e){if(!a.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}s.keys=function(){return Object.keys(i)},s.resolve=n,e.exports=s,s.id="e945"},ef22:function(e,t,a){"use strict";a("e49c")}});
//# sourceMappingURL=app.92f512a2.js.map